<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>福岡之旅 | Fukuoka Trip</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #D6EAF8; margin: 0; }
        .glass-card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-radius: 24px; border: 1px solid rgba(255,255,255,0.3); }
        .curved-header { border-radius: 0 0 40px 40px; overflow: hidden; position: relative; background: white; }
        .content-up { margin-top: -50px; position: relative; z-index: 10; }
        .banner-img { width: 100%; height: 250px; object-fit: cover; display: block; }
        .modal-overlay { background: rgba(0, 0, 0, 0.5); position: fixed; inset: 0; z-index: 50; display: flex; align-items: center; justify-content: center; padding: 20px; }
        [v-cloak] { display: none; }
    </style>
</head>
<body>
    <div id="app" v-cloak class="max-w-md mx-auto min-h-screen pb-24 shadow-2xl bg-[#D6EAF8] relative">
        
        <header class="curved-header shadow-sm">
            <img src="IMG_0144.jpeg" alt="Banner" class="banner-img">
            
            <div class="absolute bottom-6 right-4 flex space-x-2 bg-white/80 backdrop-blur-md p-2 rounded-2xl shadow-xl">
                <button @click="activeTab = 'itinerary'" :class="{'text-blue-500': activeTab === 'itinerary'}" class="p-2 text-gray-400"><i data-lucide="map"></i></button>
                <button @click="activeTab = 'info'" :class="{'text-blue-500': activeTab === 'info'}" class="p-2 text-gray-400"><i data-lucide="info"></i></button>
                <button @click="activeTab = 'shopping'" :class="{'text-blue-500': activeTab === 'shopping'}" class="p-2 text-gray-400"><i data-lucide="shopping-bag"></i></button>
                <button @click="activeTab = 'expenses'" :class="{'text-blue-500': activeTab === 'expenses'}" class="p-2 text-gray-400"><i data-lucide="wallet"></i></button>
            </div>
        </header>

        <main class="content-up px-4">
            <div v-if="activeTab === 'itinerary'">
                <div class="flex space-x-3 overflow-x-auto py-4">
                    <div v-for="day in dates" :key="day.date" 
                         @click="selectedDate = day.date"
                         :class="selectedDate === day.date ? 'bg-blue-500 text-white' : 'bg-white text-gray-500'"
                         class="flex-shrink-0 w-16 h-20 rounded-2xl flex flex-col items-center justify-center cursor-pointer shadow-sm transition-all">
                        <span class="text-[10px] font-bold uppercase">{{ day.weekday }}</span>
                        <span class="text-xl font-bold">{{ day.dayNum }}</span>
                    </div>
                </div>

                <div class="space-y-4">
                    <div v-for="(item, index) in filteredItinerary" :key="index" class="glass-card p-4 shadow-sm border border-white relative">
                        <button @click="deleteItem(item)" class="absolute top-2 right-2 text-gray-300 hover:text-red-400"><i data-lucide="x-circle" class="w-4 h-4"></i></button>
                        <span class="text-[10px] bg-blue-50 text-blue-500 px-2 py-0.5 rounded-full font-bold">{{ item.type }}</span>
                        <h3 class="font-bold text-gray-800 text-lg mt-1">{{ item.name }}</h3>
                        <p class="text-xs text-gray-500"><i data-lucide="clock" class="inline w-3 h-3 mr-1"></i> {{ item.time }}</p>
                    </div>
                </div>
            </div>
            
            </main>

        <button @click="showModal = true" class="fixed bottom-8 right-8 w-14 h-14 bg-blue-600 text-white rounded-full shadow-2xl flex items-center justify-center z-40">
            <i data-lucide="plus"></i>
        </button>

        <div v-if="showModal" class="modal-overlay">
            <div class="bg-white w-full rounded-[32px] p-6 shadow-2xl">
                <h3 class="text-xl font-bold mb-4">新增行程</h3>
                <div class="space-y-3">
                    <input v-model="newItem.name" placeholder="景點/餐廳名稱" class="w-full border-b p-2 outline-none">
                    <input v-model="newItem.time" placeholder="時間 (例如 10:00)" class="w-full border-b p-2 outline-none">
                    <select v-model="newItem.type" class="w-full border-b p-2 outline-none bg-white">
                        <option>景點</option>
                        <option>美食</option>
                        <option>住宿</option>
                        <option>交通</option>
                    </select>
                </div>
                <div class="flex space-x-3 mt-6">
                    <button @click="showModal = false" class="flex-1 py-3 bg-gray-100 rounded-xl font-bold">取消</button>
                    <button @click="addItem" class="flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold">確認新增</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, onMounted, nextTick, watch } = Vue;
        createApp({
            setup() {
                const activeTab = ref('itinerary');
                const selectedDate = ref('1/6');
                const showModal = ref(false);
                const dates = [{ weekday: 'Mon', dayNum: '6', date: '1/6' }, { weekday: 'Tue', dayNum: '7', date: '1/7' }, { weekday: 'Wed', dayNum: '8', date: '1/8' }, { weekday: 'Thu', dayNum: '9', date: '1/9' }];
                const itineraryItems = ref([
                    { date: '1/6', type: '景點', name: 'LaLaport 福岡', time: '17:00' },
                    { date: '1/7', type: '景點', name: '太宰府天滿宮', time: '09:00' }
                ]);
                const newItem = ref({ name: '', time: '', type: '景點' });

                const filteredItinerary = computed(() => itineraryItems.value.filter(i => i.date === selectedDate.value));

                const addItem = () => {
                    if(!newItem.value.name) return alert('請輸入名稱');
                    itineraryItems.value.push({ ...newItem.value, date: selectedDate.value });
                    showModal.value = false;
                    newItem.value = { name: '', time: '', type: '景點' };
                    nextTick(() => lucide.createIcons());
                };

                const deleteItem = (item) => {
                    if(confirm('確定刪除？')) itineraryItems.value = itineraryItems.value.filter(i => i !== item);
                };

                onMounted(() => lucide.createIcons());
                watch([activeTab, selectedDate, showModal], () => nextTick(() => lucide.createIcons()));

                return { activeTab, selectedDate, dates, filteredItinerary, showModal, newItem, addItem, deleteItem };
            }
        }).mount('#app');
    </script>
</body>
</html>
