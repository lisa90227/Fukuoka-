
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>福岡之旅 | Fukuoka Trip</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* 延伸圖片的粉藍色底色 */
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #D6EAF8; }
        .glass-card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-radius: 24px; border: 1px solid rgba(255,255,255,0.3); }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        /* 圓弧銜接效果 */
        .curved-header { border-radius: 0 0 40px 40px; overflow: hidden; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .content-up { margin-top: -50px; position: relative; z-index: 10; }
        /* Banner 尺寸限制 */
        .banner-img { width: 100%; height: 250px; object-fit: cover; }
        .tab-btn { transition: all 0.3s ease; }
        .tab-btn.active { color: #3B82F6; transform: scale(1.1); }
        .drag-handle { cursor: grab; }
    </style>
</head>
<body>
    <div id="app" class="max-w-md mx-auto min-h-screen pb-20 shadow-2xl bg-[#E6F2F8] relative">
        
        <header class="curved-header bg-white">
            <img src="https://i.imgur.com/KxS1Vl3.jpeg" alt="Banner" class="banner-img">
            
            <div class="absolute bottom-4 right-4 flex space-x-2 bg-white/90 p-2 rounded-full shadow-lg">
                <button @click="activeTab = 'itinerary'" :class="{'text-blue-500': activeTab === 'itinerary'}" class="p-2"><i data-lucide="map-pin"></i></button>
                <button @click="activeTab = 'info'" :class="{'text-blue-500': activeTab === 'info'}" class="p-2"><i data-lucide="info"></i></button>
                <button @click="activeTab = 'shopping'" :class="{'text-blue-500': activeTab === 'shopping'}" class="p-2"><i data-lucide="shopping-basket"></i></button>
                <button @click="activeTab = 'expenses'" :class="{'text-blue-500': activeTab === 'expenses'}" class="p-2"><i data-lucide="banknote"></i></button>
            </div>
        </header>

        <main class="content-up px-4">
            <div v-if="activeTab === 'itinerary'">
                <div class="flex space-x-4 overflow-x-auto hide-scrollbar py-4">
                    <div v-for="day in dates" :key="day.date" 
                         @click="selectedDate = day.date"
                         :class="selectedDate === day.date ? 'bg-blue-500 text-white shadow-md' : 'bg-white text-gray-500'"
                         class="flex-shrink-0 w-16 h-20 rounded-2xl flex flex-col items-center justify-center cursor-pointer transition-all">
                        <span class="text-xs font-bold uppercase">{{ day.weekday }}</span>
                        <span class="text-xl font-bold">{{ day.dayNum }}</span>
                    </div>
                </div>

                <div class="glass-card p-4 mb-4 flex items-center justify-between border border-blue-100">
                    <div class="flex items-center">
                        <i data-lucide="cloud-snow" class="text-blue-400 mr-3"></i>
                        <div>
                            <p class="text-sm font-medium text-gray-600">福岡, 日本</p>
                            <p class="text-2xl font-bold text-gray-800">4°C / <span class="text-sm text-gray-400">體感 1°C</span></p>
                        </div>
                    </div>
                    <span class="text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded">下雪中</span>
                </div>

                <div class="space-y-4">
                    <div v-for="(item, index) in filteredItinerary" :key="index" class="relative">
                        <div v-if="item.type === '航班'" class="bg-blue-600 text-white p-4 rounded-3xl shadow-lg mb-6">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-xs font-bold">{{ item.title }}</span>
                                <span class="bg-white/20 px-2 py-0.5 rounded text-[10px]">{{ item.flightNo }}</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <div class="text-center">
                                    <h3 class="text-2xl font-bold">TPE</h3>
                                    <p class="text-xs">{{ item.depTime }}</p>
                                </div>
                                <i data-lucide="plane" class="rotate-90 opacity-50"></i>
                                <div class="text-center">
                                    <h3 class="text-2xl font-bold">FUK</h3>
                                    <p class="text-xs">{{ item.arrTime }}</p>
                                </div>
                            </div>
                        </div>

                        <div v-else class="glass-card p-4 shadow-sm border border-white" @click="openMap(item.name)">
                            <div class="flex justify-between items-start mb-2">
                                <span class="text-[10px] bg-blue-50 text-blue-500 px-2 py-0.5 rounded-full">{{ item.type }}</span>
                                <i data-lucide="navigation" class="w-4 h-4 text-blue-400"></i>
                            </div>
                            <h3 class="font-bold text-gray-800 text-lg">{{ item.name }}</h3>
                            <p class="text-xs text-gray-500 mt-1"><i data-lucide="clock" class="inline w-3 h-3 mr-1"></i> {{ item.time }}</p>
                            <p v-if="item.note" class="text-xs text-gray-400 mt-2 bg-gray-50 p-2 rounded-lg italic">「{{ item.note }}」</p>
                        </div>

                        <div v-if="index < filteredItinerary.length - 1" class="py-2 flex items-center justify-center">
                            <div class="border-l-2 border-dashed border-blue-200 h-6"></div>
                            <div class="flex items-center text-[10px] text-blue-400 mx-3">
                                <i data-lucide="bus" class="w-3 h-3 mr-1"></i> 25 mins
                            </div>
                            <div class="border-l-2 border-dashed border-blue-200 h-6"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div v-if="activeTab === 'info'" class="space-y-4 py-4">
                <div class="glass-card p-5">
                    <h3 class="font-bold mb-4 flex items-center"><i data-lucide="refresh-cw" class="mr-2 w-4 h-4"></i> 匯率換算</h3>
                    <div class="flex items-center space-x-2">
                        <input type="number" v-model="jpyInput" class="w-full border-b-2 border-blue-200 p-2 outline-none focus:border-blue-500" placeholder="JPY">
                        <span class="font-bold text-gray-400">→</span>
                        <div class="w-full p-2 bg-blue-50 rounded text-blue-600 font-bold">NT$ {{ Math.round(jpyInput * 0.21) }}</div>
                    </div>
                </div>
                
                <div class="glass-card p-5">
                    <h3 class="font-bold mb-3 flex items-center"><i data-lucide="hotel" class="mr-2 w-4 h-4"></i> 住宿資訊</h3>
                    <p class="text-sm font-medium">The BREAKFAST HOTEL 福岡中洲</p>
                    <button @click="openMap('The BREAKFAST HOTEL Fukuoka Nakasu')" class="mt-2 text-xs text-blue-500 underline">開啟地圖導航</button>
                </div>

                <div class="glass-card p-5 bg-red-50 border-red-100 border">
                    <h3 class="font-bold mb-3 text-red-600 flex items-center"><i data-lucide="phone-call" class="mr-2 w-4 h-4"></i> 緊急聯絡</h3>
                    <div class="grid grid-cols-2 gap-2 text-sm text-red-500">
                        <div class="p-2 border border-red-200 rounded">警察: 110</div>
                        <div class="p-2 border border-red-200 rounded">救護車: 119</div>
                    </div>
                </div>
            </div>

            <div v-if="activeTab === 'shopping'" class="py-4"><div class="grid grid-cols-2 gap-4">
                    <div v-for="item in shoppingList" :key="item.id" class="glass-card overflow-hidden">
                        <img :src="item.img || 'https://placehold.co/200x200?text=No+Photo'" class="w-full h-32 object-cover">
                        <div class="p-3">
                            <p class="font-bold text-sm">{{ item.name }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <div v-if="activeTab === 'expenses'" class="py-4">
                <div class="bg-blue-600 rounded-3xl p-6 text-white mb-6 shadow-xl">
                    <p class="text-xs opacity-70 mb-1">總花費 (JPY)</p>
                    <h2 class="text-4xl font-bold">¥ {{ totalExpenses }}</h2>
                </div>
                <div class="space-y-3">
                    <div v-for="ex in expenses" :key="ex.id" class="glass-card p-4 flex justify-between items-center">
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-500 mr-3">
                                <i data-lucide="utensils" class="w-5 h-5"></i>
                            </div>
                            <div>
                                <p class="font-bold text-gray-800">{{ ex.name }}</p>
                                <p class="text-[10px] text-gray-400">{{ ex.date }} · {{ ex.payment }}</p>
                            </div>
                        </div>
                        <p class="font-bold text-red-500">¥ {{ ex.amount }}</p>
                    </div>
                </div>
            </div>
        </main>

        <button v-if="activeTab !== 'info'" class="fixed bottom-6 right-6 w-14 h-14 bg-blue-600 text-white rounded-full shadow-2xl flex items-center justify-center hover:scale-110 transition-transform">
            <i data-lucide="plus"></i>
        </button>
    </div>

    <script>
        const { createApp, ref, computed, onMounted, nextTick } = Vue;

        createApp({
            setup() {
                const activeTab = ref('itinerary');
                const selectedDate = ref('1/6');
                const jpyInput = ref(1000);

                const dates = [
                    { weekday: 'Mon', dayNum: '6', date: '1/6' },
                    { weekday: 'Tue', dayNum: '7', date: '1/7' },
                    { weekday: 'Wed', dayNum: '8', date: '1/8' },
                    { weekday: 'Thu', dayNum: '9', date: '1/9' },
                ];

                const itineraryItems = ref([
                    { date: '1/6', type: '航班', title: '桃園機場 → 福岡機場', flightNo: 'AK1510', depTime: '11:55', arrTime: '15:15' },
                    { date: '1/6', type: '景點', name: 'LaLaport 福岡', time: '17:00 - 21:00', note: '看鋼彈展演！' },
                    { date: '1/7', type: '景點', name: '太宰府天滿宮', time: '09:00 - 12:00', note: '買梅枝餅' },
                    { date: '1/7', type: '景點', name: '糸島', time: '14:00 - 18:00', note: '海邊鞦韆拍照' },
                    { date: '1/8', type: '美食', name: '爐端燒', time: '18:00 - 20:00', note: '已訂位' },
                    { date: '1/9', type: '景點', name: '櫛田神社', time: '10:00 - 12:00', note: '參拜福岡總鎮守' },
                ]);

                const shoppingList = ref([
                    { id: 1, name: '一蘭拉麵泡麵', img: 'https://images.unsplash.com/photo-1569718212165-3a8278d5f624?auto=format&fit=crop&w=200&q=80' },
                    { id: 2, name: '藥妝、眼罩', img: '' },
                ]);

                const expenses = ref([
                    { id: 1, name: '拉麵', amount: 1200, date: '1/6', payment: '現金', category: '飲食' },
                    { id: 2, name: '飯店費用', amount: 45000, date: '1/6', payment: '信用卡', category: '住宿' },
                ]);

                const filteredItinerary = computed(() => {
                    return itineraryItems.value.filter(item => item.date === selectedDate.value);
                });

                const totalExpenses = computed(() => {return expenses.value.reduce((sum, item) => sum + item.amount, 0);
                });

                const openMap = (query) => {
                    window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`, '_blank');
                };

                onMounted(() => {
                    lucide.createIcons();
                });

                // 監控切換分頁重新渲染 Icon
                Vue.watch(activeTab, () => {
                    nextTick(() => lucide.createIcons());
                });

                return {
                    activeTab, dates, selectedDate, filteredItinerary, 
                    jpyInput, shoppingList, expenses, totalExpenses, openMap
                };
            }
        }).mount('#app');
    </script>
</body>

</html>
